{"ast":null,"code":"import _slicedToArray from \"D:\\\\Sandra\\\\MERN\\\\projet restaurant\\\\frontend Restau\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Sandra\\\\MERN\\\\projet restaurant\\\\frontend Restau\\\\src\\\\Components\\\\Categories\\\\CategoriesComponent.js\";\nimport \"../../Styles/CategoriesComponentStyle.css\";\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport CategoriesServices from '../../Services/CategoriesServices';\nimport { Card, Carousel, Row, Col } from \"react-bootstrap\";\nimport ArticleServices from \"../../Services/ArticleServices\";\nimport Article from \"../Articles/ArticleComponent/ArticleComponent\";\nexport default function CategoriesComponent({\n  parentCallback\n}) {\n  const _useParams = useParams(),\n        societeCode = _useParams.societeCode,\n        indexCateg = _useParams.indexCateg;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        categories = _useState2[0],\n        setCategories = _useState2[1];\n\n  const _useState3 = useState(new Map()),\n        _useState4 = _slicedToArray(_useState3, 2),\n        articlesPerCateg = _useState4[0],\n        setArticlesPerCateg = _useState4[1];\n\n  const _useState5 = useState(indexCateg ? parseInt(indexCateg) : 0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        index = _useState6[0],\n        setIndexCateg = _useState6[1];\n\n  const history = useHistory();\n\n  const handleSelectCateg = (selectedIndex, e) => {\n    setIndexCateg(selectedIndex);\n    history.push(\"/Categories/\".concat(societeCode, \"/\").concat(selectedIndex));\n  };\n\n  useEffect(() => {\n    parentCallback(societeCode);\n    let mapArticle = new Map();\n    CategoriesServices.getCategoriesByCodeSoc(societeCode).then(categs => {\n      if (indexCateg === undefined || parseInt(indexCateg) >= categs.length) {\n        handleSelectCateg(0);\n        ArticleServices.getArticlesByCodeCateg(categs[0].CodeCat).then(articles => {\n          mapArticle.set(categs[0].CodeCat, articles);\n          setArticlesPerCateg(mapArticle);\n        });\n        categs.slice(1, categs.length).forEach((categ, index) => {\n          ArticleServices.getArticlesByCodeCateg(categ.CodeCat).then(articles => {\n            mapArticle.set(categ.CodeCat, articles);\n          });\n        });\n      } else {\n        ArticleServices.getArticlesByCodeCateg(categs[parseInt(indexCateg)].CodeCat).then(articles => {\n          mapArticle.set(categs[parseInt(indexCateg)].CodeCat, articles);\n          setArticlesPerCateg(mapArticle);\n        });\n        categs.forEach((categ, index) => {\n          if (categs[parseInt(indexCateg)].CodeCat !== categ.CodeCat) ArticleServices.getArticlesByCodeCateg(categ.CodeCat).then(articles => {\n            mapArticle.set(categ.CodeCat, articles);\n          });\n        });\n      }\n\n      setCategories(categs);\n    }); // eslint-disable-next-line\n  }, [societeCode]);\n  return React.createElement(\"div\", {\n    style: {\n      height: \"calc(100vh - 170px)\",\n      margin: \"20px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Carousel, {\n    className: \"parent\",\n    indicators: false,\n    controls: true,\n    activeIndex: index,\n    onSelect: (eventKey, e) => {\n      handleSelectCateg(eventKey, e);\n    },\n    interval: 5000,\n    style: {\n      height: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, categories.map(categ => React.createElement(Carousel.Item, {\n    key: categ.CodeCat,\n    style: {\n      height: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      height: \"100%\",\n      marginRight: \"5%\",\n      marginLeft: \"5%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(Card.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    style: {\n      textAlign: \"center\",\n      marginBottom: \"0px\",\n      marginTop: \"20px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    style: {\n      textDecoration: \"none\"\n    },\n    href: \"/Articles/\".concat(societeCode, \"/\").concat(categ.CodeCat, \"/0\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, categ.DesCat))), React.createElement(Card.Body, {\n    className: \"child\",\n    style: {\n      overflowY: \"scroll\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, articlesPerCateg.get(categ.CodeCat) && React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, articlesPerCateg.get(categ.CodeCat).map((article, index) => React.createElement(Col, {\n    style: {\n      textDecoration: \"none\",\n      color: \"#003e80\"\n    },\n    as: Link,\n    to: \"/Articles/\".concat(societeCode, \"/\").concat(categ.CodeCat, \"/\").concat(index),\n    xl: 4,\n    lg: 6,\n    md: 6,\n    sm: 12,\n    xs: 12,\n    key: article.CodeArt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Article, {\n    article: article,\n    size: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }))))))))));\n}","map":{"version":3,"sources":["D:\\Sandra\\MERN\\projet restaurant\\frontend Restau\\src\\Components\\Categories\\CategoriesComponent.js"],"names":["React","useEffect","useState","Link","useHistory","useParams","CategoriesServices","Card","Carousel","Row","Col","ArticleServices","Article","CategoriesComponent","parentCallback","societeCode","indexCateg","categories","setCategories","Map","articlesPerCateg","setArticlesPerCateg","parseInt","index","setIndexCateg","history","handleSelectCateg","selectedIndex","e","push","mapArticle","getCategoriesByCodeSoc","then","categs","undefined","length","getArticlesByCodeCateg","CodeCat","articles","set","slice","forEach","categ","height","margin","eventKey","map","marginRight","marginLeft","textAlign","marginBottom","marginTop","textDecoration","DesCat","overflowY","get","article","color","CodeArt"],"mappings":"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","sourcesContent":["import \"../../Styles/CategoriesComponentStyle.css\"\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link, useHistory, useParams } from 'react-router-dom'\r\nimport CategoriesServices from '../../Services/CategoriesServices'\r\nimport { Card, Carousel, Row, Col } from \"react-bootstrap\"\r\nimport ArticleServices from \"../../Services/ArticleServices\"\r\nimport Article from \"../Articles/ArticleComponent/ArticleComponent\"\r\n\r\n\r\nexport default function CategoriesComponent({ parentCallback }) {\r\n    const { societeCode, indexCateg } = useParams()\r\n    const [categories, setCategories] = useState([])\r\n    const [articlesPerCateg, setArticlesPerCateg] = useState(new Map())\r\n    const [index, setIndexCateg] = useState(indexCateg ? parseInt(indexCateg) : 0);\r\n    const history = useHistory();\r\n\r\n\r\n    const handleSelectCateg = (selectedIndex, e) => {\r\n        setIndexCateg(selectedIndex);\r\n        history.push(`/Categories/${societeCode}/${selectedIndex}`)\r\n    };\r\n\r\n    useEffect(() => {\r\n        parentCallback(societeCode)\r\n        let mapArticle = new Map();\r\n        CategoriesServices.getCategoriesByCodeSoc(societeCode).then(categs => {\r\n\r\n\r\n            if (indexCateg === undefined || parseInt(indexCateg) >= categs.length) {\r\n                handleSelectCateg(0);\r\n                ArticleServices.getArticlesByCodeCateg(categs[0].CodeCat).then(articles => {\r\n                    mapArticle.set(categs[0].CodeCat, articles);\r\n                    setArticlesPerCateg(mapArticle);\r\n                });\r\n                categs.slice(1, categs.length).forEach((categ, index) => {\r\n\r\n                    ArticleServices.getArticlesByCodeCateg(categ.CodeCat).then(articles => {\r\n                        mapArticle.set(categ.CodeCat, articles);\r\n                    });\r\n                })\r\n            } else {\r\n                ArticleServices.getArticlesByCodeCateg(categs[parseInt(indexCateg)].CodeCat).then(articles => {\r\n                    mapArticle.set(categs[parseInt(indexCateg)].CodeCat, articles);\r\n                    setArticlesPerCateg(mapArticle);\r\n                });\r\n                categs.forEach((categ, index) => {\r\n                    if (categs[parseInt(indexCateg)].CodeCat !== categ.CodeCat)\r\n                        ArticleServices.getArticlesByCodeCateg(categ.CodeCat).then(articles => {\r\n                            mapArticle.set(categ.CodeCat, articles);\r\n                        });\r\n                })\r\n            }\r\n\r\n            setCategories(categs);\r\n        })\r\n        // eslint-disable-next-line\r\n    }, [societeCode])\r\n\r\n\r\n    return (\r\n        <div style={{ height: \"calc(100vh - 170px)\", margin: \"20px\" }}>\r\n            <Carousel className=\"parent\" indicators={false} controls={true} activeIndex={index} onSelect={(eventKey, e) => { handleSelectCateg(eventKey, e) }} interval={5000} style={{ height: \"100%\" }}>\r\n                {\r\n                    categories.map(categ => (\r\n                        <Carousel.Item key={categ.CodeCat} style={{ height: \"100%\" }}>\r\n                            <Card style={{ height: \"100%\", marginRight: \"5%\", marginLeft: \"5%\" }}>\r\n                                <Card.Title>\r\n                                    <h1 style={{ textAlign: \"center\", marginBottom: \"0px\", marginTop: \"20px\" }}><a style={{ textDecoration: \"none\" }} href={`/Articles/${societeCode}/${categ.CodeCat}/0`}>{categ.DesCat}</a></h1>\r\n                                </Card.Title>\r\n                                <Card.Body className=\"child\" style={{ overflowY: \"scroll\" }}>\r\n                                    {articlesPerCateg.get(categ.CodeCat) &&\r\n                                        <Row>\r\n                                            {articlesPerCateg.get(categ.CodeCat).map((article, index) => (\r\n                                                <Col style={{ textDecoration: \"none\", color: \"#003e80\" }} as={Link} to={`/Articles/${societeCode}/${categ.CodeCat}/${index}`} xl={4} lg={6} md={6} sm={12} xs={12} key={article.CodeArt} >\r\n                                                    <Article article={article} size={1} />\r\n                                                </Col>\r\n                                            ))}\r\n                                        </Row>\r\n                                    }\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Carousel.Item>\r\n                    ))\r\n                }\r\n            </Carousel >\r\n        </div >\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}